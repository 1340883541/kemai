<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>引导页</title>
    <script src="../script/lib/rem.js"></script>
    <script src="../script/lib/fastclick.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/lib/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/lib/swiper.css" />
    <style>
        .footer{
            position: fixed;
            left: 0;
            bottom:0;
            z-index: 9;
            height: 1rem;
            width: 100%;
            text-align: center;
        }
        .footer > ul{
            padding-top: .11rem;
        }
        .footer li .f-img{
            width: .48rem;
            height: .48rem;
            margin:0 auto;
        }
        .footer li .f-img .default,
        .footer li.curr .f-img .checked{
            display: block;
        }
        .footer li.curr .f-img .default,
        .footer li .f-img .checked{
            display: none;
        }
        .footer li .f-txt{
            line-height: 1em;
            margin-top: .1rem;
            color:#ccc;
            font-size: 11px;
        }
        .footer li.curr .f-txt{
            color:#5494f2;
        }
    </style>
</head>

<body>
    <footer>
        <div class="footer">
            <ul class="flex-wrap bor-1px-t">
                <li class="curr flex-con" onclick="setFootBar(this,0)">
                    <div class="f-img w-fill-img">
                        <img class="default" src="../image/icon-1-d.png" mode="scaleToFill" alt="">
                        <img class="checked" src="../image/icon-1-p.png" mode="scaleToFill" alt="">
                    </div>
                    <div class="f-txt">
                        工作台
                    </div>
                </li>
                <li class="flex-con" onclick="setFootBar(this,1)">
                    <div class="f-img w-fill-img">
                        <img class="default" src="../image/icon-2-d.png" mode="scaleToFill" alt="">
                        <img class="checked" src="../image/icon-2-p.png" mode="scaleToFill" alt="">
                    </div>
                    <div class="f-txt">
                        客户
                    </div>
                </li>
                <li class="flex-con" onclick="setFootBar(this,2)">
                    <div class="f-img w-fill-img">
                        <img class="default" src="../image/icon-3-d.png" mode="scaleToFill" alt="">
                        <img class="checked" src="../image/icon-3-p.png" mode="scaleToFill" alt="">
                    </div>
                    <div class="f-txt">
                        我的
                    </div>
                </li>
            </ul>
        </div>
    </footer>
</body>
<script type="text/javascript" src="../script/lib/api.js"></script>
<script type="text/javascript" src="../script/lib/jquery_3.1.1.min.js"></script>
<script type="text/javascript" src="../script/lib/fastclick.js"></script>
<script type="text/javascript" src="../script/lib/md5.js"></script>
<script type="text/javascript" src="../script/lib/swiper.min.js"></script>
<script type="text/javascript" src="../script/lib/vue.min.js"></script>
<script type="text/javascript" src="../script/lib/vue_lazyload.min.js"></script>
<script type="text/javascript" src="../script/lib/api_ajax.js"></script>
<script type="text/javascript" src="../script/common.js"></script>
<script type="text/javascript">
    apiready = function() {
        // 安卓 关闭app
        wHrefJs.andriodBackMain({
            cb: function() {
                api.closeWidget({
                    silent: false
                });
            }
        });
        openFrameGroup(0);
    };
    // 底部按钮切换
    function setFootBar(_this,i){
        if(!$(_this).hasClass('curr')){
            $(_this).addClass('curr').siblings().removeClass('curr');
            setFrameGroup(i);
            if(i == 1){
                // 打开frame
                api.sendEvent({
                    name: 'openCustomerFrame'
                });
            }else{
                api.sendEvent({
                    name: 'closeCustomerFrame'
                });
            }
        }
    }
    var frameList = [
        {
            name: 'index',
            url: './index/index.html',
            bgColor: '#fff'
        },
        {
            name: 'customer',
            url: './customer/customer_header.html',
            bgColor: '#fff'
        },
        {
            name: 'person',
            url: './person/index.html',
            bgColor: '#fff'
        }
    ];
    // 打开frame组
    function openFrameGroup(i){
        var h = $(window).height() - $('.footer').height();
        api.openFrameGroup ({
            name: 'mainFrameGroup',
            background: '#fff',
            scrollEnabled: false,
            rect: {
                 x: 0,
                 y: 0,
                 w: 'auto',
                 h: h
            },
            index: i,
            preload:2,
            frames:frameList,
            reload:true
        }, function(ret, err){});
    }

    // 设置frameGroup的index
    function setFrameGroup(index){
        api.setFrameGroupIndex({
            name: 'mainFrameGroup',
            index: index,
            scroll: true,
            reload:false
        });
    }
</script>

</html>
