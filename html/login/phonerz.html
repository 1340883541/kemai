<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>手机认证</title>
    <script src="../../script/lib/rem.js"></script>
    <script src="../../script/lib/fastclick.js"></script>
    <link rel="stylesheet" type="text/css" href="../../css/lib/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/login/phonerz.css" />
</head>
<body>
    <div id="wrap">
        <div id="header" class="header">
           <div class="back"><a href="login.html"><img src="../../image/icon-dh-guanbi.png"></a></div>
        </div>
        <div id="main" class="flex-con">
            <div class="phone_authentication">手机认证</div>
             <div class="form-div">
                 <div class="row flex-wrap flex-align">
                     <div class="input-box flex-con">
                         <input type="tel" maxlength="13" placeholder="请输入手机号" v-model="phone">
                         <div class="code">
                             <span  v-html="obtain"  v-show="default_obtain" @click="obtainClick"></span>
                             <span  v-show="!default_obtain">{{count}}秒后重新发送</span>
                         </div>
                     </div>
                 </div>
                 <div class="row flex-wrap flex-align">
                     <div class="input-box flex-con"><input type="text" maxlength="16" placeholder="请输入验证码" v-model="code"></div>
                 </div>
                 <div class="submit-btn space-between" @click="authentication">
                     <span class="text-align">认证</span>
                 </div>
            <div>
        </div>
    </div>
</body>
<script type="text/javascript" src="../../script/lib/api.js"></script>
<script type="text/javascript" src="../../script/lib/jquery_3.1.1.min.js"></script>
<script type="text/javascript" src="../../script/lib/fastclick.js"></script>
<script type="text/javascript" src="../../script/lib/md5.js"></script>
<script type="text/javascript" src="../../script/lib/swiper.min.js"></script>
<script type="text/javascript" src="../../script/lib/vue.min.js"></script>
<script type="text/javascript" src="../../script/lib/vue_lazyload.min.js"></script>
<script type="text/javascript" src="../../script/lib/api_ajax.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script>
    // apiready = function(){
    //     console.log('手机认证')
    // }

    new Vue({
        el: '#wrap',
        data: {
            phone: '',
            code: '',
            obtain:'获取验证码',
            default_obtain:true,
            count:'',
            timer: null,
        },
        methods:{
            obtainClick:function(){
                var _this = this;
                const TIME_COUNT = 60;
                     if (!_this.timer) {
                       _this.count = TIME_COUNT;
                       _this.default_obtain = false;
                       _this.timer = setInterval(() => {
                       if (_this.count > 0 && _this.count <= TIME_COUNT) {
                         _this.count--;
                        } else {
                         _this.default_obtain = true;
                         clearInterval(this.timer);
                         _this.timer = null;
                        }
                       }, 1000)
            }
        },
        authentication:function(){
            var self = this;
            var phoneExp = /^1[3456789]\d{9}$/;
            if (self.phone == "" || self.phone == null || self.phone == undefined) {
                alert("请输入账号")
            } else if (!phoneExp.test(self.phone)) {
                alert("请输入账号2222")
            };
            if (self.code == "" || self.code == null || self.code == undefined) {
                alert("请输入验证码")
            }
        }
       }

    })
</script>
</html>
